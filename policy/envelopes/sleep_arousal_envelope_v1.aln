use NewRowPrint.Biophysical::*;

BiophysicalEnvelopeSpec {
    spec_id            = "sleep_arousal_envelope_v1",
    version            = "1.0.0",
    created_by         = "bostrom18sd2ujv24ual9c9pshtxys6j8knh6xaead9ye7",
    created_at         = "2026-02-09T00:00:00Z",
    capability_state   = "CapControlledHuman",
    juris_tags         = ["US_FDA", "EU_MDR"],
    roh_ceiling        = 0.30,
    auto_downgrade_enabled = true,

    axes = [
        EnvelopeAxis {
            id          = "resp_rate_sleep",
            kind        = RESP_RATE,
            range       = RangeSpec {
                min_safe          = 8.0,   // breaths/min, typical sleep range
                max_safe          = 20.0,
                min_warn          = 9.0,
                max_warn          = 18.0,
                max_delta_per_sec = 1.0
            },
            transitions = TransitionRule {
                warn_epochs_to_flag   = 3,
                risk_epochs_to_downgrade = 1
            },
            roh_axis_id   = "sleep_arousal",
            weight_in_roh = 0.30
        },

        EnvelopeAxis {
            id          = "eda_tonic_scl_sleep",
            kind        = EDA_TONIC_SCL,
            range       = RangeSpec {
                min_safe          = 0.1,
                max_safe          = 10.0,
                min_warn          = 0.1,
                max_warn          = 6.0,
                max_delta_per_sec = 1.0
            },
            transitions = TransitionRule {
                warn_epochs_to_flag   = 3,
                risk_epochs_to_downgrade = 1
            },
            roh_axis_id   = "sleep_arousal",
            weight_in_roh = 0.30
        },

        EnvelopeAxis {
            id          = "motion_head_rms_sleep",
            kind        = MOTION_HEAD_RMS,
            range       = RangeSpec {
                min_safe          = 0.0,
                max_safe          = 0.05,  // low movement expected
                min_warn          = 0.0,
                max_warn          = 0.04,
                max_delta_per_sec = 0.02
            },
            transitions = TransitionRule {
                warn_epochs_to_flag   = 4,
                risk_epochs_to_downgrade = 2
            },
            roh_axis_id   = "sleep_arousal",
            weight_in_roh = 0.40
        }
    ]
}
